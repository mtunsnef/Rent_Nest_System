@model RentNest.Web.Models.CreatePostViewModel

@{
    ViewData["Title"] = "Đăng tin cho thuê";
}
@{
    var amenitiesCount = Model.Amenities;
    var accommodationTypesCount = Model.AccommodationTypes;
}

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<section class="ftco-section contact-section ftco-no-pb mb-4" style="padding: 8em 0">
    <div class="container">
        <!-- TIÊU ĐỀ VÀ BƯỚC -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <h4 class="font-weight-bold mb-0" style="font-family: system-ui;">Tạo tin đăng</h4>
                <small class="text-muted">
                    Bước <span id="current-step">1</span>.
                    <span id="step-label"></span>
                </small>
            </div>
            <div>
                <button type="button" class="btn btn-outline-secondary btn-sm me-2">
                    <i class="bi bi-eye"></i> Xem trước
                </button>
                <button type="button" class="btn btn-outline btn-sm">Quay về</button>
            </div>
        </div>

        <!-- PROGRESS BAR -->
        <div class="progress mb-4" style="height: 4px;">
            <div id="progress-bar" class="progress-bar bg-danger" role="progressbar" style="width: 33%; height:4px;"></div>
        </div>

        <!-- FORM BƯỚC -->
        <div class="row justify-content-center">
            <div class="col-md-10 ftco-animate">
                <form asp-controller="Posts" asp-action="Post_Landlord" id="filterForm" enctype="multipart/form-data" class="bg-light p-4 p-md-5 contact-form">
                    @Html.AntiForgeryToken()
                    <!-- Bước 1 -->
                    <div class="step step-1">
                        <div class="row justify-content-between">
                            <div class="col-md-12">
                                <h5 class="font-weight-bold mb-3">Địa chỉ</h5>
                                <div class="form-group">
                                    <label>Địa chỉ <span class="text-danger">*</span></label>
                                    <div id="selectedAddressDisplay" name="address" class="form-control d-flex align-items-center cursor required-field" role="button" data-bs-toggle="modal" data-bs-target="#addressSelect" tabindex="0">
                                        Chọn địa chỉ
                                    </div>
                                    <small class="text-danger error-message" style="display:none;"></small>
                                    <!-- Hiển thị bản đồ sau khi chọn địa chỉ -->
                                    <div id="mapPreviewContainer" style="display: none;" class="mt-3">
                                        <label class="form-label">Bản đồ địa chỉ đã chọn</label>
                                        <div style="position: relative; padding-bottom: 50%; height: 0; overflow: hidden; border-radius: 8px;">
                                            <iframe id="mapPreviewIframe" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" loading="lazy" allowfullscreen></iframe>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <!-- Thông tin chính -->
                        <h5 class="font-weight-bold mt-4">Thông tin chính</h5>
                        <div class="form-group">
                            <label>Loại chuyên mục <span class="text-danger">*</span></label>
                            <select name="category" class="form-control required-field">
                                <option value="">-- Chọn loại --</option>
                                @foreach (var item in Model.AccommodationTypes)
                                {
                                    <option value="@item.TypeId" data-name="@item.TypeName">
                                        @item.TypeName
                                    </option>
                                }
                            </select>

                            <small class="text-danger error-message" style="display:none;"></small>
                        </div>

                        <div class="form-group">
                            <label>Diện tích <span class="text-danger">*</span></label>
                            <div class="input-group">
                                <input id="areaInput" type="number" name="area" class="form-control required-field" placeholder="Nhập diện tích">
                                <span class="input-group-text">m²</span>
                            </div>
                            <small class="text-danger error-message" style="display:none;"></small>
                        </div>

                        <div class="form-group">
                            <label>Mức giá <span class="text-danger">*</span></label>
                            <div class="input-group mb-2">
                                <input id="priceInput" name="price" type="text" class="form-control price-input required-field" placeholder="Nhập mức giá" data-target="gia" data-suggest="true">
                                <span class="input-group-text">VNĐ</span>
                            </div>
                            <div class="suggestions mt-2" data-suggest="gia"></div>
                            <div class="summary text-muted" data-summary="gia"></div>
                            <small class="text-danger error-message" style="display:none;"></small>
                        </div>

                        <div class="form-group">
                            <label>Số tiền cọc</label>
                            <div class="input-group mb-2">
                                <input type="text" name="depositPrice" class="form-control price-input" placeholder="Nhập số tiền cọc" data-target="coc">
                                <span class="input-group-text">VNĐ</span>
                            </div>
                        </div>

                        <!-- Thông tin khác -->
                        <h5 class="d-inline-block font-weight-bold mt-4">
                            Thông tin khác
                        </h5><label>&ensp;(không bắt buộc)</label>

                        <div class="form-group">
                            <label>Tình trạng nội thất</label>
                            <select id="furnitureSelect" name="furnitureStatus" class="form-control">
                                <option value="">-- Chọn tình trạng nội thất --</option>
                                <option value="none">Không có nội thất</option>
                                <option value="basic">Nội thất cơ bản</option>
                                <option value="full">Nội thất đầy đủ</option>
                            </select>
                        </div>

                        <div id="furnitureFeatures" class="form-group mt-2" style="display: none;">
                            <label>Đặc điểm nổi bật</label>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input name="hasLoft" class="form-check-input" type="checkbox" value="true" id="featureLoft">
                                        <label class="form-check-label" for="featureLoft">Có gác</label>
                                    </div>
                                    <div class="form-check">
                                        <input name="hasKitchenCabinet" class="form-check-input" type="checkbox" value="true" id="featureKitchen">
                                        <label class="form-check-label" for="featureKitchen">Có kệ bếp</label>
                                    </div>
                                    <div class="form-check">
                                        <input name="hasAirConditioner" class="form-check-input" type="checkbox" value="true" id="featureAC">
                                        <label class="form-check-label" for="featureAC">Có máy lạnh</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input name="hasWashingMachine" class="form-check-input" type="checkbox" value="true" id="featureWasher">
                                        <label class="form-check-label" for="featureWasher">Có máy giặt</label>
                                    </div>
                                    <div class="form-check">
                                        <input name="hasRefrigerator" class="form-check-input" type="checkbox" value="true" id="featureFridge">
                                        <label class="form-check-label" for="featureFridge">Có tủ lạnh</label>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="row">
                            <div class="form-group col-md-6">
                                <label>Số phòng ngủ</label>
                                <input type="number" name="numberBedroom" class="form-control" placeholder="Nhập số phòng ngủ">
                            </div>
                            <div class="form-group col-md-6">
                                <label>Số phòng tắm/vệ sinh</label>
                                <input type="number" name="numberBathroom" class="form-control" placeholder="Nhập số phòng tắm">
                            </div>
                        </div>

                        <div class="form-group mt-3">
                            <label class="fw-bold d-block mb-2">Tiện ích</label>
                            <div id="amenities" class="d-flex flex-wrap gap-2">
                                @foreach (var amenity in Model.Amenities)
                                {
                                    <button type="button" class="btn btn-outline-dark amenity-btn mr-4 rounded-pill shadow-none mb-2" data-value="@amenity.AmenityId" data-name="@amenity.AmenityName">
                                        <div class="d-flex align-items-center gap-2">
                                            @Html.Raw(amenity.IconSvg)
                                            <span class="ml-2">@amenity.AmenityName</span>
                                        </div>
                                    </button>
                                }
                            </div>
                            <input type="hidden" name="selectedAmenities" id="selectedAmenities">
                        </div>

                        <!-- Thông tin liên hệ -->
                        <h5 class="font-weight-bold mt-4">Thông tin liên hệ</h5>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label>Họ tên</label>
                                <input type="text" name="contactName" class="form-control" placeholder="Nhập họ tên">
                            </div>
                            <div class="form-group col-md-6">
                                <label>Số điện thoại</label>
                                <input type="text" name="contactNumber" class="form-control" placeholder="Nhập số điện thoại">
                            </div>
                        </div>


                        <!-- Tiêu đề và tin đăng -->
                        <h5 class="font-weight-bold mt-4">Tiêu đề và tin đăng</h5>
                        <div class="form-group">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <label class="m-0">Tạo nhanh với AI</label>
                                <button id="createWithAI" type="button" class="btn btn-outline-dark mr-4 rounded-pill shadow-none" data-bs-toggle="modal" data-bs-target="#selectAIOptions" tabindex="0">
                                    <div class="d-flex align-items-center gap-2">
                                        <svg viewBox="0 0 24 24" width="30" height="30" fill="#000000" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M12.8768 16.1682C13.0292 15.7535 13.6375 15.7535 13.7899 16.1682L14.2066 17.3023C14.2554 17.435 14.3637 17.5395 14.5013 17.5865L15.6774 17.9884C16.1075 18.1353 16.1075 18.7218 15.6774 18.8688L14.5013 19.2706C14.3637 19.3177 14.2554 19.4221 14.2066 19.5549L13.7899 20.6889C13.6375 21.1037 13.0292 21.1037 12.8768 20.6889L12.4601 19.5549C12.4113 19.4221 12.303 19.3177 12.1653 19.2706L10.9892 18.8688C10.5591 18.7218 10.5591 18.1353 10.9892 17.9884L12.1653 17.5865C12.303 17.5395 12.4113 17.435 12.4601 17.3023L12.8768 16.1682Z"></path> 
                                            <path d="M14.6394 3.47278C14.8711 2.84241 15.7956 2.84241 16.0272 3.47278L16.8211 5.63332C16.8953 5.8351 17.0599 5.99384 17.2691 6.06534L19.5097 6.83089C20.1634 7.05426 20.1634 7.94574 19.5097 8.16911L17.2691 8.93466C17.0599 9.00616 16.8953 9.1649 16.8211 9.36668L16.0272 11.5272C15.7956 12.1576 14.8711 12.1576 14.6394 11.5272L13.8455 9.36668C13.7714 9.1649 13.6068 9.00616 13.3975 8.93466L11.157 8.16911C10.5032 7.94574 10.5032 7.05426 11.157 6.83089L13.3975 6.06534C13.6068 5.99384 13.7714 5.8351 13.8455 5.63332L14.6394 3.47278Z"></path>
                                            <path d="M6.48641 9.36289C6.65786 8.87904 7.34214 8.87904 7.51358 9.36289L7.9824 10.686C8.03728 10.8409 8.15913 10.9627 8.31401 11.0176L9.63711 11.4864C10.121 11.6579 10.121 12.3421 9.63711 12.5136L8.31401 12.9824C8.15913 13.0373 8.03728 13.1591 7.9824 13.314L7.51358 14.6371C7.34214 15.121 6.65786 15.121 6.48641 14.6371L6.0176 13.314C5.96272 13.1591 5.84087 13.0373 5.68599 12.9824L4.36289 12.5136C3.87904 12.3421 3.87904 11.6579 4.36289 11.4864L5.68599 11.0176C5.84087 10.9627 5.96272 10.8409 6.0176 10.686L6.48641 9.36289Z"></path></svg>
                                        <span class="ml-2">Tạo với AI</span>
                                    </div>
                                </button>
                            </div>

                            <label>Tiêu đề <span class="text-danger">*</span></label>
                            <input name="titlePost" type="text" class="form-control required-field" id="titleInput" placeholder="Mô tả ngắn gọn về loại chuyên mục, diện tích, địa chỉ (VD: Cho thuê căn hộ 125m2 tại Đà Nẵng)">
                            <small class="text-danger error-message" style="display:none;">Tiêu đề không được để trống</small>
                            <small class="form-text text-muted">
                                <span id="titleCount" style="display:none;">0/99</span> (Tối thiểu 30 ký tự, tối đa 99 ký tự)
                            </small>
                        </div>

                        <div class="form-group">
                            <label>Nội dung tin đăng <span class="text-danger">*</span></label>
                            <textarea name="contentPost" class="form-control required-field" id="contentInput" rows="10" placeholder="Mô tả chi tiết về:
  • Loại chuyên mục
  • Vị trí/Địa điểm
  • Diện tích, tiện ích
  • Tình trạng nội thất
  ...
(VD: Khu nhà có vị trí thuận lợi, gần công viên, trường học...)"></textarea>
                            <small class="text-danger error-message" style="display:none;">Nội dung không được để trống</small>
                            <small class="form-text text-muted">
                                <span id="contentCount" style="display:none;">0/5000</span> (Tối thiểu 50 ký tự, tối đa 5000 ký tự)
                            </small>
                        </div>

                        <div class="d-flex justify-content-end">
                            <button type="button" class="btn btn-primary float-end mt-3" id="nextStepBtn" onclick="nextStep()" disabled>Tiếp tục</button>
                        </div>

                    </div>


                    <!-- Bước 2 -->
                    <div class="step step-2 d-none">
                        <h5 class="font-weight-bold mb-3 mt-4">Thông tin khác</h5>
                        <div class="border border-primary rounded p-4 text-center bg-light mb-3">
                            <label for="imageUpload" class="d-block cursor">
                                <svg viewBox="0 0 24 24" width="50" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M13 5H9.32843C8.79799 5 8.28929 5.21071 7.91421 5.58579L7.08579 6.41421C6.71071 6.78929 6.20201 7 5.67157 7H4C2.89543 7 2 7.89543 2 9L2 19C2 20.1046 2.89543 21 4 21H18C19.1046 21 20 20.1046 20 19V12M17 5H23M20 8V2M11 18C13.2091 18 15 16.2091 15 14C15 11.7909 13.2091 10 11 10C8.79086 10 7 11.7909 7 14C7 16.2091 8.79086 18 11 18Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                                <div class="mt-2">Tải ảnh từ thiết bị</div>
                            </label>
                            <input type="file" id="imageUpload" name="Images" multiple accept="image/*" class="d-none">
                        </div>

                        <small class="d-block mb-2 text-muted">
                            • Tải lên tối thiểu 3 ảnh và tối đa 20 ảnh trong một bài đăng<br>
                            • Dung lượng ảnh tối đa 10MB<br>
                            • Hình ảnh phải liên quan đến phòng trọ, nhà cho thuê<br>
                            • Không chèn văn bản, số điện thoại lên ảnh
                        </small>

                        <div id="preview" class="d-flex flex-wrap gap-2"></div>
                        <div class="d-flex justify-content-between">
                            <button type="button" class="btn btn-secondary mt-3" onclick="prevStep()">Quay lại</button>
                            <button type="button" class="btn btn-primary float-end mt-3" id="nextStepBtn2" onclick="nextStep()">Tiếp tục</button>
                        </div>
                    </div>

                    <!-- Bước 3 -->
                    <div class="step step-3 d-none">
                        <h5 class="font-weight-bold mb-4">
                            Sắp xong rồi! Vui lòng chọn phương thức đăng tin dưới đây.
                        </h5>

                        <div class="d-flex align-items-center mb-4">
                            <label>Chọn gói đăng</label>
                            <div class="ml-5 dropdown d-flex align-items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-calendar3" viewBox="0 0 16 16">
                                    <path d="M14 3h-1V1h-1v2H4V1H3v2H2a1 1 0 0 0-1 1v1h14V4a1 1 0 0 0-1-1z" />
                                    <path d="M15 6H1v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6z" />
                                </svg>
                                <select id="timeUnitDropdown" class="form-control ml-2">
                                    @foreach (var unit in Model.TimeUnitPackages)
                                    {
                                        <option value="@unit.TimeUnitId">Trả theo @unit.TimeUnitName</option>
                                    }
                                </select>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label>Chọn loại tin</label>
                            <div id="packageTypeContainer" class="d-flex gap-4 justify-content-between"></div>
                        </div>

                        <div class="mb-4">
                            <h6>Đăng dài ngày hơn, tiết kiệm hơn!</h6>
                            <div id="durationContainer" class="d-flex gap-4 justify-content-center"></div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label>Ngày bắt đầu</label>
                                <input type="date" class="form-control" id="startDate">
                                <small id="endDateLabel" class="text-muted mt-1 d-block"></small>
                            </div>
                            <div class="col-md-6">
                                <label>Hẹn giờ đăng tin</label>
                                <select class="form-control" id="scheduleSelect" disabled>
                                </select>
                                <small id="scheduleNote" class="text-muted mt-1 d-block">Chỉ áp dụng cho tin VIP</small>
                            </div>
                        </div>

                        <div class="mb-4">
                            <a href="#" class="d-flex justify-content-between align-items-center border p-3 text-decoration-none text-dark rounded">
                                <div>
                                    <i class="bi bi-tag"></i> <strong>Khuyến mãi</strong>
                                </div>
                                <span class="text-primary">Chọn khuyến mãi <i class="bi bi-chevron-right"></i></span>
                            </a>
                        </div>

                        <!-- Tổng tiền -->
                        <div class="d-flex justify-content-between align-items-center rounded">
                            <h3 class="text-dark"><strong>Tổng tiền</strong></h3>
                            <h3 class="ext-danger font-weight-bolder" id="total-price">0 đ</h3>
                        </div>

                        <!-- Nút hành động -->
                        <div class="d-flex justify-content-between mt-4">
                            <button type="button" class="btn btn-secondary mx-2" onclick="prevStep()">Quay lại</button>
                            <button type="button" class="btn btn-primary float-end mt-3" id="nextStepBtn3">Tiếp tục</button>
                        </div>
                    </div>
                     @await Html.PartialAsync("Client/_PaymentSummary")
                </form>
            </div>
        </div>
    </div>
    <div id="myToast" class="toast position-fixed hide m-3" role="alert" aria-live="assertive" aria-atomic="true" style="z-index: 999;bottom: 0;right: 0;">
        <div class="toast-header justify-content-between">
            <strong class="me-auto">Thông báo</strong>
            <button type="button" class="btn-close ms-2 mb-1" aria-label="Close" onclick="hideToast()"></button>
        </div>
        <div class="toast-body">
            Bạn chỉ được upload tối đa 20 ảnh!
        </div>
    </div>
</section>

<div id="paymentLoadingOverlay" class="d-none" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.7); z-index: 9999; color: white; font-size: 2rem; text-align: center;
    justify-content: center; align-items: center; flex-direction: column;">
    <div class="spinner-border text-light mb-3" role="status"></div>
    <div style="font-size: 25px">Đang chuyển hướng đến trang thanh toán...</div>
</div>

<!-- Modal address buoc 1 -->
<div class="modal fade" id="addressSelect" tabindex="-1" aria-labelledby="addressSelectLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" style="max-width: 700px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title fs-5" id="addressSelectLabel">Chọn Địa Chỉ</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="max-height: 400px; overflow-y: auto;">
                <div class="mb-3">
                    <label for="provinceSelect" class="form-label">Tỉnh/Thành phố <span class="text-danger">*</span></label>
                    <select class="form-control" id="provinceSelect"></select>
                </div>

                <div class="mb-3">
                    <label for="districtSelect" class="form-label">Quận/Huyện <span class="text-danger">*</span></label>
                    <select class="form-control" id="districtSelect"></select>
                </div>

                <div class="mb-3">
                    <label for="wardSelect" class="form-label">Phường/Xã <span class="text-danger">*</span></label>
                    <select class="form-control" id="wardSelect"></select>
                </div>

                <div class="mb-3">
                    <label for="streetInput" class="form-label">Đường/Phố (không bắt buộc)</label>
                    <input type="text" class="form-control" id="streetInput" placeholder="Nhập tên đường">
                </div>

                <div class="mb-3">
                    <label class="form-label">Địa chỉ hiển thị trên tin đăng</label>
                    <div style="position: relative; padding-bottom: 50%; height: 0; overflow: hidden; border-radius: 8px;">
                        <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;"
                                loading="lazy" allowfullscreen
                                src="https://maps.google.com/maps?q=&z=12&output=embed">
                        </iframe>
                    </div>
                </div>
            </div>

            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Thoát</button>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="confirmAddressBtn">Xác nhận</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal chọn phong cách AI -->
<div class="modal fade" id="selectAIOptions" tabindex="-1" aria-labelledby="selectAIOptionsLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" style="max-width: 500px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title fs-5" id="selectAIOptionsLabel">Chọn Phong Cách Bài Đăng</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body" style="max-height: 400px; overflow-y: auto;">
                <p class="mb-3">Hãy chọn phong cách viết mà bạn muốn cho bài đăng:</p>

                <div class="form-check mb-3">
                    <input class="form-check-input" type="radio" name="aiStyleOption" id="styleElegant" value="Sang trọng" checked>
                    <label class="form-check-label" for="styleElegant">
                        <strong>Sang trọng:</strong> Phù hợp với các căn hộ cao cấp, văn phong chuyên nghiệp và thu hút khách hàng đẳng cấp.
                    </label>
                </div>

                <div class="form-check mb-3">
                    <input class="form-check-input" type="radio" name="aiStyleOption" id="styleFormal" value="Lịch sự">
                    <label class="form-check-label" for="styleFormal">
                        <strong>Lịch sự:</strong> Ngắn gọn, rõ ràng, truyền tải thông tin chính xác và dễ hiểu cho mọi đối tượng.
                    </label>
                </div>

                <div class="form-check mb-3">
                    <input class="form-check-input" type="radio" name="aiStyleOption" id="styleHumorous" value="Hài hước">
                    <label class="form-check-label" for="styleHumorous">
                        <strong>Hài hước:</strong> Văn phong vui vẻ, dí dỏm để thu hút sự chú ý một cách thoải mái, thân thiện.
                    </label>
                </div>
            </div>

            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Thoát</button>
                <button type="button" class="btn btn-primary" id="confirmAIOptionBtn">
                    Xác nhận
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Khuyến Mãi -->
<div class="modal fade" id="promotionModal" tabindex="-1" aria-labelledby="promotionModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="promotionModalLabel">Chọn khuyến mãi</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
            </div>
            <div class="modal-body">
                <div class="input-group mb-3">
                    <input type="text" id="promotionSearchInput" class="form-control" placeholder="Nhập mã khuyến mãi hoặc tên...">
                    <button class="btn btn-outline-primary" id="promotionSearchBtn" type="button">Tìm kiếm</button>
                </div>

                <div id="promotionList">
                    <p class="text-muted">Không có khuyến mãi nào.</p>
                </div>
            </div>
        </div>
    </div>
</div>

@if (!string.IsNullOrEmpty(TempData["SuccessMessage"] as string))
{
    <script>
        Swal.fire({
            icon: 'success',
            title: 'Đăng tin thành công!',
            text: '@Html.Raw(TempData["SuccessMessage"])',
            timer: 2500,
            showConfirmButton: false
        }).then(() => {
            window.location.href = '@Html.Raw(TempData["RedirectUrl"])';
        });
    </script>
}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/js/post-user/collect-data-for-ai.js"></script>
<script src="~/js/post-user/load-address.js"></script>
<script src="~/js/post-user/load-multi-img.js"></script>
<script src="~/js/post-user/price-suggestion.js"></script>
<script src="~/js/post-user/progress-step.js"></script>
<script src="~/js/post-user/selected-amenities.js"></script>
<script src="~/js/post-user/confirm-address.js"></script>
<script src="~/js/post-user/validation.js"></script>
<script src="~/js/post-user/step3.js"></script>
<script src="~/js/post-user/collect-data-for-post.js"></script>
<script src="~/js/post-user/payment-summary.js"></script>

<script>
    //dac diem noi bat
    const furnitureSelect = document.getElementById('furnitureSelect');
    const furnitureFeatures = document.getElementById('furnitureFeatures');

    furnitureSelect.addEventListener('change', function () {
        const selected = this.value;

        if (selected === 'basic') {
            furnitureFeatures.style.display = 'block';
        } else {
            furnitureFeatures.style.display = 'none';
            furnitureFeatures.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
        }
    });

    document.getElementById('furnitureSelect')?.addEventListener('change', function () {
        const value = this.value;
        const featureDiv = document.getElementById('furnitureFeatures');
        const checkboxes = featureDiv.querySelectorAll('input[type="checkbox"]');

        if (value === 'full') {
            featureDiv.style.display = 'block';
            checkboxes.forEach(cb => cb.checked = true);
        } else if (value === 'basic') {
            featureDiv.style.display = 'block';
            checkboxes.forEach(cb => cb.checked = false);
        } else {
            featureDiv.style.display = 'none';
            checkboxes.forEach(cb => cb.checked = false);
        }
    });
</script>