@model RentNest.Web.Models.AccommodationDetailViewModel
@{
    ViewData["Title"] = "Chi tiết phòng thuê";
}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

<section style="margin-top: 9rem">
    <div class="container">
        <div class="row no-gutters align-items-end justify-content-start">
            <div class="col-md-9 ftco-animate pb-4">
                <p class="breadcrumbs">
                    <span class="mr-2">
                        <a href="/Home">
                            Trang chủ <i class="ion-ios-arrow-forward"></i>
                        </a>
                    </span>
                    <span class="mr-2">
                        <a href="/Room">
                            Danh sách các phòng <i class="ion-ios-arrow-forward"></i>
                        </a>
                    </span>
                    <span>
                        Chi tiết phòng <i class="ion-ios-arrow-forward"></i>
                    </span>
                </p>
            </div>
        </div>
    </div>
</section>

<section class="ftco-services-2">
    <div class="container">
        <div class="row">
            <div class="col-md-12 property-wrap mb-5">
                <div class="row">
                    <!-- Swiper Slider -->
                    <div class="col-md-6">
                        <!-- Ảnh chính -->
                        <div class="swiper mySwiper2 mb-2">
                            <div class="swiper-wrapper">
                                <div class="swiper-slide"><img src="images/work-1.jpg" class="img-fluid rounded main-img" /></div>
                                <div class="swiper-slide"><img src="images/work-2.jpg" class="img-fluid rounded main-img" /></div>
                                <div class="swiper-slide"><img src="images/work-3.jpg" class="img-fluid rounded main-img" /></div>
                                <div class="swiper-slide"><img src="images/work-4.jpg" class="img-fluid rounded main-img" /></div>
                                <div class="swiper-slide"><img src="images/work-5.jpg" class="img-fluid rounded main-img" /></div>
                                <div class="swiper-slide"><img src="images/work-6.jpg" class="img-fluid rounded main-img" /></div>
                                <div class="swiper-slide"><img src="images/work-7.jpg" class="img-fluid rounded main-img" /></div>
                                <div class="swiper-slide"><img src="images/work-8.jpg" class="img-fluid rounded main-img" /></div>
                                <div class="swiper-slide"><img src="images/work-9.jpg" class="img-fluid rounded main-img" /></div>
                            </div>
                        </div>

                        <!-- Ảnh nhỏ thumbnail -->
                        <div class="swiper mySwiperThumbs">
                            <div class="swiper-wrapper">
                                <div class="swiper-slide"><img src="images/work-1.jpg" class="img-fluid thumb-img" /></div>
                                <div class="swiper-slide"><img src="images/work-2.jpg" class="img-fluid thumb-img" /></div>
                                <div class="swiper-slide"><img src="images/work-3.jpg" class="img-fluid thumb-img" /></div>
                                <div class="swiper-slide"><img src="images/work-4.jpg" class="img-fluid thumb-img" /></div>
                                <div class="swiper-slide"><img src="images/work-5.jpg" class="img-fluid thumb-img" /></div>
                                <div class="swiper-slide"><img src="images/work-6.jpg" class="img-fluid thumb-img" /></div>
                                <div class="swiper-slide"><img src="images/work-7.jpg" class="img-fluid thumb-img" /></div>
                                <div class="swiper-slide"><img src="images/work-8.jpg" class="img-fluid thumb-img" /></div>
                                <div class="swiper-slide"><img src="images/work-9.jpg" class="img-fluid thumb-img" /></div>
                            </div>
                            <!-- Nút điều hướng -->
                            <div class="swiper-button-next"></div>
                            <div class="swiper-button-prev"></div>
                        </div>
                    </div>

                    <!-- Thông tin phòng -->
                    <div class="col-md-6 py-4">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h3 class="mb-0"><a href="properties-single.html">Phòng trọ gần FPT</a></h3>
                            <div class="d-flex align-items-center">
                                <span class="text-warning mr-2">★★★★☆ 4.5</span>
                                <button class="btn btn-light border"><i class="fas fa-heart"></i></button>
                            </div>
                        </div>
                        <span style="font-size: 110% !important" class="badge badge-danger mb-2 p-2">3.5 triệu / tháng</span>
                        <p>Phòng trọ đầy đủ tiện nghi, nhà vệ sinh riêng, bếp nấu, gần trường FPT, khu vực an ninh.</p>

                        <div class="d-flex align-items-center my-3">
                            <img src="images/person_1.jpg" class="rounded-circle" style="width: 50px; height: 50px;">
                            <div class="ml-3">
                                <strong>Duy Khoa</strong><br>
                                <small>Đăng 3 giờ trước • Phản hồi: 100%</small>
                            </div>
                        </div>

                        <div class="d-flex mb-2">
                            <a href="tel:033648xxxx" class="btn btn-success mr-2"><i class="fa fa-phone"></i> Gọi 033648xxxx</a>
                            <a href="#" class="btn btn-outline-primary"><i class="fa fa-comment"></i> Chat</a>
                        </div>

                        <div class="mt-2">
                            <button class="btn btn-light btn-sm">Phòng này còn cho thuê không ạ?</button>
                            <button class="btn btn-light btn-sm">Giá cuối là bao nhiêu vậy?</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-12 tour-wrap">
                <table class="table">
                    <tbody>
                        <tr>
                            <th scope="row">Số giường ngủ</th>
                            <td>
                                <p>@Model.BedroomCount giường</p>
                            </td>
                        </tr>

                        <tr>
                            <th scope="row">Số phòng tắm</th>
                            <td>
                                <p>@Model.BathroomCount phòng tắm</p>
                            </td>
                        </tr>

                        <tr>
                            <th scope="row">Tình trạng nội thất</th>
                            <td>
                                <p>@Model.FurnitureStatus</p>
                            </td>
                        </tr>

                        <tr>
                            <th scope="row">Tiện ích</th>
                            <td class="d-flex">
                                <ul>
                                    @if (Model.HasKitchenCabinet == true)
                                    {
                                        <li>Tủ bếp</li>
                                    }
                                    @if (Model.HasAirConditioner == true)
                                    {
                                        <li>Máy lạnh</li>
                                    }
                                    @if (Model.HasRefrigerator == true)
                                    {
                                        <li>Tủ lạnh</li>
                                    }
                                    @if (Model.HasWashingMachine == true)
                                    {
                                        <li>Máy giặt</li>
                                    }
                                    @if (Model.HasLoft == true)
                                    {
                                        <li>Gác lửng</li>
                                    }
                                </ul>
                            </td>
                        </tr>

                        <tr>
                            <th scope="row">Ngày đăng</th>
                            <td>
                                <p>@Model.CreatedAt?.ToString("dd/MM/yyyy")</p>
                            </td>
                        </tr>

                        <tr>
                            <th scope="row">Cập nhật lần cuối</th>
                            <td>
                                <p>@Model.UpdatedAt?.ToString("dd/MM/yyyy")</p>
                            </td>
                        </tr>

                        <tr>
                            <th scope="row">Vị trí</th>
                            <td>
                                @{
                                    var encodedAddress = System.Net.WebUtility.UrlEncode(ViewData["Address"]?.ToString());
                                }
                                <div style="position: relative;">
                                    <div style="position: relative; padding-bottom: 75%; height: 0; overflow: hidden;">
                                        <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;"
                                                loading="lazy" allowfullscreen
                                                src="https://maps.google.com/maps?q=@encodedAddress&z=15&output=embed">
                                        </iframe>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-12 tour-wrap">
                <div class="pt-5 mt-5">
                    <h3 class="mb-5">6 Reviews</h3>
                    <ul class="comment-list">
                        <li class="comment">
                            <div class="vcard bio">
                                <img src="images/person_1.jpg" alt="User avatar">
                            </div>
                            <div class="comment-body">
                                <h3>Nguyễn Văn A</h3>
                                <div class="meta">Ngày 05/03/2025 lúc 10:15 AM</div>
                                <p>Phòng sạch sẽ, thoáng mát, đầy đủ tiện nghi. Mình ở đây hơn 1 năm rồi và cảm thấy rất thoải mái. Khu vực an ninh, không gian yên tĩnh, phù hợp để học tập.</p>
                                <p><a href="#" class="reply">Trả lời</a></p>
                            </div>
                        </li>

                        <li class="comment">
                            <div class="vcard bio">
                                <img src="images/person_2.jpg" alt="User avatar">
                            </div>
                            <div class="comment-body">
                                <h3>Trần Thị B</h3>
                                <div class="meta">Ngày 05/03/2025 lúc 11:30 AM</div>
                                <p>Giá thuê hợp lý, phòng rộng rãi, có bàn học và wifi rất ổn. Tuy nhiên, giờ giấc hơi nghiêm ngặt nên ai hay đi về khuya thì nên cân nhắc nhé.</p>
                                <p><a href="#" class="reply">Trả lời</a></p>
                            </div>

                            <ul class="children">
                                <li class="comment">
                                    <div class="vcard bio">
                                        <img src="images/person_3.jpg" alt="User avatar">
                                    </div>
                                    <div class="comment-body">
                                        <h3>Phạm Văn C</h3>
                                        <div class="meta">Ngày 05/03/2025 lúc 12:00 PM</div>
                                        <p>Trần Thị B: Mình thấy quy định giờ giấc cũng hợp lý thôi, vì giúp đảm bảo an ninh cho mọi người. Nhưng nếu cần đi khuya thì có thể xin phép quản lý.</p>
                                        <p><a href="#" class="reply">Trả lời</a></p>
                                    </div>
                                </li>
                            </ul>
                        </li>

                        <li class="comment">
                            <div class="vcard bio">
                                <img src="images/person_4.jpg" alt="User avatar">
                            </div>
                            <div class="comment-body">
                                <h3>Lê Minh D</h3>
                                <div class="meta">Ngày 05/03/2025 lúc 01:45 PM</div>
                                <p>Phòng rất mới và sạch, có máy giặt chung, nước nóng lạnh đầy đủ. Ở đây rất thích vì gần trường, đi học chỉ mất 5 phút.</p>
                                <p><a href="#" class="reply">Trả lời</a></p>
                            </div>
                        </li>
                    </ul>

                    <!-- END comment-list -->

                    <div class="comment-form-wrap pt-5">
                        <h3 class="mb-4">Để lại bình luận</h3>
                        <form action="#" class="p-4 bg-light rounded shadow-sm">
                            <div class="form-group mb-3">
                                <label for="name" class="fw-bold">Họ và tên *</label>
                                <input type="text" class="form-control" id="name" placeholder="Nhập họ và tên của bạn">
                            </div>
                            <div class="form-group mb-3">
                                <label for="email" class="fw-bold">Email *</label>
                                <input type="email" class="form-control" id="email" placeholder="Nhập email của bạn">
                            </div>
                            <div class="form-group mb-3">
                                <label for="website" class="fw-bold">Website (nếu có)</label>
                                <input type="url" class="form-control" id="website" placeholder="Nhập URL trang web của bạn">
                            </div>
                            <div class="form-group mb-3">
                                <label for="message" class="fw-bold">Nội dung bình luận *</label>
                                <textarea id="message" cols="30" rows="5" class="form-control" placeholder="Nhập nội dung bình luận..."></textarea>
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary py-2 px-4">Gửi bình luận</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section> <!-- .section -->

<!-- SwiperJS JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
<script>
    // Khởi tạo Swiper
    var thumbSwiper = new Swiper(".mySwiperThumbs", {
        spaceBetween: 0, // <== GIẢM KHOẢNG CÁCH
        slidesPerView: 8,
        freeMode: true,
        watchSlidesProgress: true,
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev"
        },
    });


    var mainSwiper = new Swiper(".mySwiper2", {
        spaceBetween: 10,
        loop: true,
        autoplay: {
            delay: 3000,
            disableOnInteraction: false,
        },
        thumbs: {
            swiper: thumbSwiper,
        },
    });

    // Hover để thay đổi ảnh chính (không cần click)
    document.querySelectorAll('.mySwiperThumbs .swiper-slide img').forEach(function (img, index) {
        img.addEventListener('mouseenter', function () {
            mainSwiper.slideToLoop(index);
        });
    });
</script>

<style>
    .thumb-img {
        border: 2px solid #ddd;
        border-radius: 5px;
        cursor: pointer;
        height: 60px;
        object-fit: cover;
    }


    .main-img {
        height: 350px;
        object-fit: cover;
        width: 100%;
    }

    .swiper-button-next,
    .swiper-button-prev {
        color: #333;
    }
</style>